# prj.conf for Left Buzzy (Peripheral only)
# Copyright (c) 2024 Buzzy System
# SPDX-License-Identifier: Apache-2.0

CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="Right_Buzzy"
CONFIG_BT_DEVICE_APPEARANCE=833

# No SMP/pairing for Left Buzzy (only Right Buzzy pairs)
CONFIG_BT_SMP=y

# GATT database
CONFIG_BT_GATT_SERVICE_CHANGED=n
CONFIG_BT_GATT_CACHING=n

# GPIO support
CONFIG_GPIO=y
CONFIG_PWM=y

# Console configuration for J-Link RTT
CONFIG_CONSOLE=y
CONFIG_RTT_CONSOLE=y
CONFIG_UART_CONSOLE=n
CONFIG_USE_SEGGER_RTT=y

# System workqueue stack size
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1024

# Main stack size
CONFIG_MAIN_STACK_SIZE=1024

# BT RX stack size
CONFIG_BT_RX_STACK_SIZE=1024

# Enable printk for debugging
CONFIG_PRINTK=y

# Reduce BT TX stack size for peripheral-only
CONFIG_BT_HCI_TX_STACK_SIZE_WITH_PROMPT=y
CONFIG_BT_HCI_TX_STACK_SIZE=640

# Optimize buffer allocation for peripheral-only
CONFIG_BT_L2CAP_TX_BUF_COUNT=4
CONFIG_BT_BUF_ACL_TX_COUNT=4
CONFIG_BT_BUF_ACL_TX_SIZE=69
CONFIG_BT_BUF_EVT_RX_COUNT=3
CONFIG_BT_BUF_EVT_DISCARDABLE_COUNT=2


CONFIG_LOG=y
CONFIG_BT_DIS=y
CONFIG_BT_DIS_PNP=n

# CONFIG_DT_HAS_ZEPHYR_BT_HCI_LL_SW_SPLIT_ENABLED=y
# CONFIG_BT_LL_SW_SPLIT=y
# CONFIG_BT_CTLR_ADVANCED_FEATURES=y
# CONFIG_BT_CTLR_ADVANCED_FEATURES=y
# CONFIG_BT_CTLR_CONN_RSSI=y
# CONFIG_BT_CTLR_TX_PWR_DYNAMIC_CONTROL=y
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y